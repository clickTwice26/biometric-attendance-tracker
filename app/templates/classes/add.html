{% extends "base.html" %}

{% block title %}Add Class - Fingerprint Attendance{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-6">
    <!-- Page Header -->
    <div class="flex items-center space-x-4">
        <a href="{{ url_for('frontend.classes_list') }}" 
           class="text-gray-600 hover:text-gray-900">
            <i class="fas fa-arrow-left text-xl"></i>
        </a>
        <h1 class="text-3xl font-bold text-gray-900">
            <i class="fas fa-book-medical text-indigo-600"></i> Add New Class
        </h1>
    </div>
    
    <!-- Form -->
    <div class="bg-white shadow rounded-lg p-6">
        <form method="POST" class="space-y-6">
            <!-- Name -->
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">
                    Class Name <span class="text-red-500">*</span>
                </label>
                <input type="text" id="name" name="name" required 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                       placeholder="e.g., Computer Science 101">
            </div>
            
            <!-- Code -->
            <div>
                <label for="code" class="block text-sm font-medium text-gray-700 mb-1">
                    Class Code
                </label>
                <input type="text" id="code" name="code" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                       placeholder="e.g., CS101">
                <p class="mt-1 text-sm text-gray-500">
                    Unique identifier for the class
                </p>
            </div>
            
            <!-- Teacher Name -->
            <div>
                <label for="teacher_name" class="block text-sm font-medium text-gray-700 mb-1">
                    Teacher Name
                </label>
                <input type="text" id="teacher_name" name="teacher_name" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                       placeholder="e.g., Dr. John Smith">
            </div>
            
            <!-- Schedule -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-3">
                    Class Schedule
                </label>
                <div class="space-y-3 bg-gray-50 p-4 rounded-md">
                    {% set days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'] %}
                    {% set day_labels = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'] %}
                    
                    {% for i in range(days|length) %}
                    {% set day = days[i] %}
                    {% set label = day_labels[i] %}
                    <div class="flex items-center space-x-4 bg-white p-3 rounded border border-gray-200">
                        <div class="flex items-center w-32">
                            <input type="checkbox" 
                                   id="schedule_{{ day }}_enabled" 
                                   name="schedule_{{ day }}_enabled"
                                   onchange="toggleScheduleDay('{{ day }}')"
                                   class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                            <label for="schedule_{{ day }}_enabled" class="ml-2 text-sm font-medium text-gray-700">
                                {{ label }}
                            </label>
                        </div>
                        <div class="flex items-center space-x-2 flex-1">
                            <input type="time" 
                                   id="schedule_{{ day }}_start" 
                                   name="schedule_{{ day }}_start"
                                   disabled
                                   class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 schedule-time-{{ day }}">
                            <span class="text-gray-500">to</span>
                            <input type="time" 
                                   id="schedule_{{ day }}_end" 
                                   name="schedule_{{ day }}_end"
                                   disabled
                                   class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 schedule-time-{{ day }}">
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <p class="mt-2 text-xs text-gray-500">
                    <i class="fas fa-info-circle"></i> Select days and set time ranges for each class session. Only one session per day is allowed.
                </p>
            </div>
            
            <script>
                function toggleScheduleDay(day) {
                    const checkbox = document.getElementById(`schedule_${day}_enabled`);
                    const timeInputs = document.querySelectorAll(`.schedule-time-${day}`);
                    
                    timeInputs.forEach(input => {
                        input.disabled = !checkbox.checked;
                        if (!checkbox.checked) {
                            input.value = '';
                        }
                    });
                }
            </script>
            
            <!-- Description -->
            <div>
                <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
                    Description
                </label>
                <textarea id="description" name="description" rows="3"
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"
                          placeholder="Brief description of the class"></textarea>
            </div>
            
            <!-- Buttons -->
            <div class="flex items-center justify-end space-x-4 pt-4">
                <a href="{{ url_for('frontend.classes_list') }}" 
                   class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">
                    Cancel
                </a>
                <button type="submit" 
                        class="px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">
                    <i class="fas fa-save mr-2"></i> Save Class
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
